# 说说CDN技术
:::tip 专题简介
- CDN是什么
- CDN主要技术
- CDN优点
- CDN缺点
:::

## CDN是什么
CDN原文叫内容分发网，它就是一组分布在不同地理位置的服务器，其目的是更有效地向用户分发互联网内容。依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。

## CDN的两项主要技术
- 全局的负载均衡
- CDN缓存系统

### 什么是全局负载均衡
全局负载均衡是指根服务器将内容分发到各个不同节点的分服务器，帮助用户挑选一个最佳节点提供服务。

### 什么是最佳服务器节点
- 物理位置相对来说最近
- 并且访问人数相对来说最少

### CDN缓存系统是指什么
指将用户上次浏览的东西放在边缘服务器缓存起来，客户再次访问的时候如何用户浏览器缓存失效那么就可以直接从边缘服务器读取缓存，不用去根服务器查找数据，这样大大提高访问速度。

### CDN缓存重要指标
- 命中率
- 回源率

### 什么是命中率
边缘分服务器通过自身数据缓存无需反复去根服务器获取数据，叫做缓存命中率。

### 什么是回源率

分服务器去根服务器获取数据的次数

:::tip 总结
一般命中率越高，回源率越低，CDN缓存最有效，回源率一般不超过5%是比较好
:::


## CDN的优点
- 提高用户访问速度：CDN可以把数据尽可能的存放在离用户最近的服务器上，从而保证用户能够尽快访问数据
- 降低系统负荷：利用CDN的多级缓存机制，减轻中心服务器的压力，降低服务器系统负荷。
- 保障业务稳定性：CDN网络的分布式部署和灵活调配可以使得业务负载更加均衡，同时能够通过数据备份、容灾机制保障业务的持续性。

## CDN缺点
- CDN网络服务大。
- 缓存机制可能导致内容不一致。
- CDN网络黑匣子分析不便。
- CDN提高硬件成本。
- 缓存转移会影响原网站可用性。
- CDN自身的潜在安全威胁。

## HTTP缓存与CDN缓存的结合
当用户访问我们的业务服务器时，首先进行的就是http缓存处理，如果http缓存通过校验，则直接响应给用户，如果未通过校验，则继续进行cdn缓存的处理，cdn缓存处理完成后返回给客户端，由客户端进行http缓存规则存储并响应给用户。再回到开篇缓存在实际场景中的应用，当我们分析缓存问题时，一定要将两个流程独立开来分析判断，是由于http缓存配置的不合理，还是cdn缓存未及时更新引起的问题。